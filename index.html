import React, { useState, useEffect } from 'react';
import { ChevronRight, DollarSign, Calculator, Home, CheckCircle, AlertCircle, Package, Wrench, Zap, Palette } from 'lucide-react';

// ==================== CONVERSATION FLOW DATA ====================
// In your actual implementation, you would import this from conversation-flow.js
// For this demo, all conversation flow logic is contained within this component
const CONVERSATION_FLOW = {
  budget: {
    question: "Hi! I'll help you get a kitchen remodel estimate. What's your budget range?",
    inputType: "choice",
    required: true,
    options: [
      "Under $30,000", 
      "$30,000 - $60,000", 
      "$60,000 - $100,000", 
      "$100,000 - $150,000",
      "Over $150,000",
      "I'm not sure yet"
    ],
    secondaryMessages: {
      "Under $30,000": {
        message: "⚠️ That budget will limit us to mostly cosmetic updates. We'll focus on high-impact changes.",
        emotion: "concern",
        timing: "immediate"
      },
      "I'm not sure yet": {
        message: "No problem! This estimate will help you understand typical costs.",
        emotion: "neutral", 
        timing: "immediate"
      }
    },
    nextStep: {
      "Under $30,000": "budget_limited_options",
      "default": "kitchen_size"
    },
    lineItems: [],
    variables: {
      "budgetTier": {
        "Under $30,000": "budget",
        "$30,000 - $60,000": "moderate", 
        "$60,000 - $100,000": "standard",
        "$100,000 - $150,000": "premium",
        "Over $150,000": "luxury",
        "I'm not sure yet": "standard"
      }
    }
  },

  budget_limited_options: {
    question: "For your budget, let's focus on the highest impact changes. What's most important?",
    inputType: "choice",
    required: true,
    options: [
      "Cabinet refresh (paint + hardware)",
      "Countertops only", 
      "Backsplash + paint",
      "Show me all options anyway"
    ],
    nextStep: {
      "Show me all options anyway": "kitchen_size",
      "default": "budget_limited_execution"
    },
    lineItems: [
      {
        condition: "Cabinet refresh (paint + hardware)",
        items: [
          { name: "Cabinet Painting", price: 8000, category: "labor" },
          { name: "Cabinet Hardware", price: 1200, category: "materials" }
        ]
      },
      {
        condition: "Countertops only", 
        items: [
          { name: "Laminate Countertops", price: 6000, category: "materials" },
          { name: "Countertop Installation", price: 1500, category: "labor" }
        ]
      },
      {
        condition: "Backsplash + paint",
        items: [
          { name: "Basic Backsplash", price: 3000, category: "materials" },
          { name: "Kitchen Painting", price: 2500, category: "labor" }
        ]
      }
    ]
  },

  budget_limited_execution: {
    question: "Perfect! Here's your focused estimate. Want to add anything else within budget?",
    inputType: "choice",
    required: false,
    options: ["Add new lighting ($800)", "Add hardware upgrade (+$500)", "That's all", "Start over with full options"],
    nextStep: {
      "Start over with full options": "kitchen_size",
      "default": "complete"
    },
    lineItems: [
      {
        condition: "Add new lighting ($800)",
        items: [{ name: "Basic Lighting Update", price: 800, category: "electrical" }]
      },
      {
        condition: "Add hardware upgrade (+$500)", 
        items: [{ name: "Hardware Upgrade", price: 500, category: "materials" }]
      }
    ]
  },

  kitchen_size: {
    question: "What's your kitchen size? (This determines material quantities)",
    inputType: "choice",
    required: true,
    options: [
      "Small (up to 100 sq ft)", 
      "Average (100-200 sq ft)", 
      "Large (200-300 sq ft)",
      "Extra Large (300+ sq ft)"
    ],
    variables: {
      "sqft": {
        "Small (up to 100 sq ft)": 100,
        "Average (100-200 sq ft)": 150,
        "Large (200-300 sq ft)": 250,
        "Extra Large (300+ sq ft)": 350
      },
      "sizeMultiplier": {
        "Small (up to 100 sq ft)": 0.8,
        "Average (100-200 sq ft)": 1.0,
        "Large (200-300 sq ft)": 1.4,
        "Extra Large (300+ sq ft)": 1.8
      }
    },
    nextStep: { "default": "project_scope" },
    lineItems: []
  },

  project_scope: {
    question: "What level of renovation?",
    inputType: "choice", 
    required: true,
    options: [
      "Cosmetic refresh only",
      "Partial renovation", 
      "Full renovation",
      "Full renovation + layout changes"
    ],
    nextStep: {
      "Cosmetic refresh only": "cosmetic_flow",
      "default": "cabinets"
    },
    lineItems: [
      {
        condition: "Full renovation",
        items: [
          { 
            name: "Demolition Labor", 
            calculation: "multiply",
            basePrice: 2500,
            multiplier: "sizeMultiplier",
            category: "labor" 
          },
          { name: "Dumpster Rental", price: 1000, category: "materials" }
        ]
      },
      {
        condition: "Full renovation + layout changes",
        items: [
          { 
            name: "Demolition + Structural", 
            calculation: "multiply",
            basePrice: 4000,
            multiplier: "sizeMultiplier", 
            category: "labor" 
          },
          { name: "Engineering/Permits", price: 3000, category: "labor" },
          { name: "Dumpster Rental", price: 1500, category: "materials" }
        ]
      }
    ]
  },

  cosmetic_flow: {
    question: "For a cosmetic refresh, what would you like to update?",
    inputType: "multiselect",
    required: true,
    options: [
      "Paint cabinets ($8,000)",
      "New cabinet hardware ($1,200)", 
      "Backsplash ($3,500)",
      "Paint walls ($1,500)",
      "New lighting ($2,000)",
      "Cabinet organizers ($1,500)"
    ],
    nextStep: { "default": "complete" },
    lineItems: [
      {
        condition: "Paint cabinets ($8,000)",
        items: [{ name: "Cabinet Painting", price: 8000, category: "labor" }]
      },
      {
        condition: "New cabinet hardware ($1,200)",
        items: [{ name: "Cabinet Hardware", price: 1200, category: "materials" }]
      },
      {
        condition: "Backsplash ($3,500)", 
        items: [
          { name: "Backsplash Materials", price: 1800, category: "materials" },
          { name: "Backsplash Installation", price: 1700, category: "labor" }
        ]
      },
      {
        condition: "Paint walls ($1,500)",
        items: [{ name: "Wall Painting", price: 1500, category: "labor" }]
      },
      {
        condition: "New lighting ($2,000)",
        items: [{ name: "Lighting Update", price: 2000, category: "electrical" }]
      },
      {
        condition: "Cabinet organizers ($1,500)",
        items: [{ name: "Cabinet Organizers", price: 1500, category: "materials" }]
      }
    ]
  },

  cabinets: {
    question: "Cabinets are your biggest expense ($25-50k). What's your approach?",
    inputType: "choice",
    required: true,
    options: [
      "Reface existing cabinets",
      "Stock cabinets (basic)",
      "Semi-custom cabinets", 
      "Full custom cabinets",
      "Luxury custom cabinets"
    ],
    secondaryMessages: {
      "Reface existing cabinets": {
        message: "Good budget option if your layout works",
        timing: "immediate"
      },
      "Full custom cabinets": {
        message: "Best quality, fully customized to your space",
        timing: "immediate"
      }
    },
    nextStep: { "default": "countertops" },
    lineItems: [
      {
        condition: "Reface existing cabinets",
        items: [
          { name: "Cabinet Refacing", price: 8000, category: "materials" },
          { name: "Custom Cabinet Painting", price: 12000, category: "labor" }
        ]
      },
      {
        condition: "Stock cabinets (basic)",
        items: [
          { 
            name: "Stock Cabinets", 
            calculation: "multiply",
            basePrice: 25000,
            multiplier: "sizeMultiplier",
            category: "materials" 
          },
          { name: "Cabinet Installation", price: 4000, category: "labor" },
          { name: "Basic Painting", price: 5000, category: "labor" }
        ]
      },
      {
        condition: "Semi-custom cabinets",
        items: [
          { 
            name: "Semi-Custom Cabinets",
            calculation: "multiply", 
            basePrice: 35000,
            multiplier: "sizeMultiplier",
            category: "materials"
          },
          { name: "Cabinet Installation", price: 5000, category: "labor" },
          { name: "Cabinet Painting", price: 8000, category: "labor" }
        ]
      },
      {
        condition: "Full custom cabinets",
        items: [
          { 
            name: "Custom Cabinets",
            calculation: "multiply",
            basePrice: 45000, 
            multiplier: "sizeMultiplier",
            category: "materials"
          },
          { name: "Custom Installation", price: 6000, category: "labor" },
          { name: "Custom Cabinet Painting", price: 12000, category: "labor" }
        ]
      },
      {
        condition: "Luxury custom cabinets",
        items: [
          { 
            name: "Luxury Custom Cabinets",
            calculation: "multiply",
            basePrice: 60000,
            multiplier: "sizeMultiplier", 
            category: "materials"
          },
          { name: "Premium Installation", price: 8000, category: "labor" },
          { name: "Premium Painting", price: 15000, category: "labor" }
        ]
      }
    ]
  },

  countertops: {
    question: "Countertops ($10-15k range):",
    inputType: "gallery", 
    required: true,
    options: [
      { 
        name: "Laminate", 
        price: 6000,
        image: "https://images.unsplash.com/photo-1556912173-46c336c7fd55?w=400",
        description: "Budget option, can chip"
      },
      { 
        name: "Granite",
        price: 12000, 
        image: "https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=400",
        description: "Natural stone, needs annual sealing"
      },
      { 
        name: "Quartz",
        price: 14000,
        image: "https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=400", 
        description: "Zero maintenance, Tanya's top choice"
      },
      { 
        name: "Quartzite",
        price: 18000,
        image: "https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=400&brightness=110",
        description: "Premium natural stone, can backlight"
      }
    ],
    secondaryMessages: {
      "Granite": {
        message: "⚠️ Granite requires annual re-sealing maintenance",
        timing: "afterSelection"
      },
      "Quartz": {
        message: "✅ Excellent choice - zero maintenance and uniform appearance", 
        timing: "afterSelection"
      }
    },
    nextStep: { "default": "appliances" },
    lineItems: [
      {
        condition: "any", 
        items: [
          { 
            name: "Countertops",
            calculation: "optionPrice",
            category: "materials"
          },
          { name: "Countertop Installation", price: 2000, category: "labor" }
        ]
      }
    ]
  },

  appliances: {
    question: "Appliances (typically 30% of kitchen cost):",
    inputType: "choice",
    required: true,
    options: [
      "No appliances (I'll buy separately)",
      "LG Package - reliable mid-range ($10k)",
      "GE Cafe - retro styling ($12k)",
      "Thermador/Wolf - professional ($30k)", 
      "Sub-Zero + Wolf - luxury ($55k)"
    ],
    nextStep: { "default": "complete" },
    lineItems: [
      {
        condition: "LG Package - reliable mid-range ($10k)",
        items: [
          { name: "LG Appliance Package", price: 10000, category: "materials" },
          { name: "Appliance Installation", price: 2000, category: "labor" }
        ]
      },
      {
        condition: "GE Cafe - retro styling ($12k)",
        items: [
          { name: "GE Cafe Package", price: 12000, category: "materials" },
          { name: "Appliance Installation", price: 2000, category: "labor" }
        ]
      },
      {
        condition: "Thermador/Wolf - professional ($30k)",
        items: [
          { name: "Thermador/Wolf Package", price: 30000, category: "materials" },
          { name: "Professional Installation", price: 3000, category: "labor" }
        ]
      },
      {
        condition: "Sub-Zero + Wolf - luxury ($55k)",
        items: [
          { name: "Sub-Zero + Wolf Package", price: 55000, category: "materials" },
          { name: "Luxury Installation", price: 4000, category: "labor" }
        ]
      }
    ]
  }
};

const ALWAYS_INCLUDED = [
  { 
    name: "Design Consultation", 
    price: 0, 
    category: "design", 
    description: "Complimentary design consultation" 
  },
  {
    name: "Project Management",
    price: 0,
    category: "design", 
    description: "Basic project coordination"
  }
];

// ==================== CALCULATION ENGINE ====================
class FlowCalculationEngine {
  static calculateLineItem(lineItem, sessionVariables, selectedOption = null) {
    const { calculation, basePrice, price, multiplier, pricePerSqFt, sqftVariable } = lineItem;
    
    switch (calculation) {
      case "multiply":
        const multiplierValue = sessionVariables[multiplier] || 1;
        return basePrice * multiplierValue;
        
      case "perSqFt":
        const sqft = sessionVariables[sqftVariable] || 150;
        return pricePerSqFt * sqft;
        
      case "optionPrice":
        return selectedOption?.price || 0;
        
      case "flat":
      default:
        return price || basePrice || 0;
    }
  }
  
  static getNextStep(currentStepName, userInput) {
    const step = CONVERSATION_FLOW[currentStepName];
    const nextStepConfig = step.nextStep;
    
    if (!nextStepConfig) return "complete";
    
    if (nextStepConfig[userInput]) {
      return nextStepConfig[userInput];
    }
    
    return nextStepConfig.default || "complete";
  }
  
  static shouldShowSecondaryMessage(stepName, userInput, timing = "immediate") {
    const step = CONVERSATION_FLOW[stepName];
    const messages = step.secondaryMessages;
    
    if (!messages || !messages[userInput]) return null;
    
    const messageConfig = messages[userInput];
    if (messageConfig.timing !== timing) return null;
    
    return {
      message: messageConfig.message,
      emotion: messageConfig.emotion || "neutral"
    };
  }
  
  static updateSessionVariables(stepName, userInput, sessionVariables) {
    const step = CONVERSATION_FLOW[stepName];
    const variables = step.variables;
    
    if (!variables) return sessionVariables;
    
    const updated = { ...sessionVariables };
    
    Object.keys(variables).forEach(variableName => {
      const mapping = variables[variableName];
      if (mapping[userInput] !== undefined) {
        updated[variableName] = mapping[userInput];
      }
    });
    
    return updated;
  }
}

// ==================== MAIN COMPONENT ====================
export default function KitchenEstimator() {
  const [currentStep, setCurrentStep] = useState('budget');
  const [sessionData, setSessionData] = useState({});
  const [sessionVariables, setSessionVariables] = useState({});
  const [lineItems, setLineItems] = useState([...ALWAYS_INCLUDED]);
  const [selectedOptions, setSelectedOptions] = useState([]);
  const [secondaryMessage, setSecondaryMessage] = useState(null);
  const [conversationHistory, setConversationHistory] = useState([]);

  const currentStepConfig = CONVERSATION_FLOW[currentStep];

  // ==================== HANDLERS ====================
  const handleSelection = (selection, selectedOption = null) => {
    const step = CONVERSATION_FLOW[currentStep];
    
    // Update conversation history
    setConversationHistory(prev => [...prev, {
      step: currentStep,
      question: step.question,
      answer: selection,
      timestamp: Date.now()
    }]);

    // Update session data
    const newSessionData = { ...sessionData, [currentStep]: selection };
    setSessionData(newSessionData);

    // Update session variables
    const newVariables = FlowCalculationEngine.updateSessionVariables(
      currentStep, selection, sessionVariables
    );
    setSessionVariables(newVariables);

    // Add line items based on selection
    const newLineItems = [...lineItems];
    
    if (step.lineItems) {
      step.lineItems.forEach(lineItemGroup => {
        if (shouldAddLineItems(lineItemGroup, selection)) {
          lineItemGroup.items.forEach(item => {
            const calculatedPrice = FlowCalculationEngine.calculateLineItem(
              item, newVariables, selectedOption
            );
            
            newLineItems.push({
              ...item,
              calculatedPrice,
              stepName: currentStep,
              userChoice: selection,
              id: `${currentStep}-${item.name}-${Date.now()}`
            });
          });
        }
      });
    }

    // Handle always include items from step
    if (step.alwaysInclude) {
      step.alwaysInclude.forEach(item => {
        const calculatedPrice = FlowCalculationEngine.calculateLineItem(
          item, newVariables
        );
        newLineItems.push({
          ...item,
          calculatedPrice,
          stepName: currentStep,
          userChoice: selection,
          id: `${currentStep}-always-${item.name}-${Date.now()}`
        });
      });
    }

    setLineItems(newLineItems);

    // Show secondary message if exists
    const message = FlowCalculationEngine.shouldShowSecondaryMessage(
      currentStep, selection, "immediate"
    );
    setSecondaryMessage(message);

    // Move to next step after a brief delay
    setTimeout(() => {
      const nextStep = FlowCalculationEngine.getNextStep(currentStep, selection);
      if (nextStep !== "complete") {
        setCurrentStep(nextStep);
        setSecondaryMessage(null);
      }
    }, message ? 2000 : 500);
  };

  const handleMultiSelect = (selections) => {
    const step = CONVERSATION_FLOW[currentStep];
    
    // Update conversation history
    setConversationHistory(prev => [...prev, {
      step: currentStep,
      question: step.question,
      answer: selections.join(', '),
      timestamp: Date.now()
    }]);

    // Update session data
    const newSessionData = { ...sessionData, [currentStep]: selections };
    setSessionData(newSessionData);

    // Add line items for each selection
    const newLineItems = [...lineItems];
    
    selections.forEach(selection => {
      if (step.lineItems) {
        step.lineItems.forEach(lineItemGroup => {
          if (shouldAddLineItems(lineItemGroup, selection)) {
            lineItemGroup.items.forEach(item => {
              const calculatedPrice = FlowCalculationEngine.calculateLineItem(
                item, sessionVariables
              );
              
              newLineItems.push({
                ...item,
                calculatedPrice,
                stepName: currentStep,
                userChoice: selection,
                id: `${currentStep}-${item.name}-${selection}-${Date.now()}`
              });
            });
          }
        });
      }
    });

    setLineItems(newLineItems);

    // Move to next step
    setTimeout(() => {
      const nextStep = FlowCalculationEngine.getNextStep(currentStep, selections[0] || "default");
      if (nextStep !== "complete") {
        setCurrentStep(nextStep);
      }
    }, 500);
  };

  const shouldAddLineItems = (lineItemGroup, selection) => {
    const condition = lineItemGroup.condition;
    
    if (!condition || condition === "any") return true;
    if (condition === selection) return true;
    if (condition.startsWith("not ") && selection !== condition.substring(4)) return true;
    
    return false;
  };

  // ==================== CALCULATE TOTALS ====================
  const calculateTotals = () => {
    const categories = {};
    let total = 0;

    lineItems.forEach(item => {
      const price = item.calculatedPrice || item.price || 0;
      total += price;
      
      if (!categories[item.category]) {
        categories[item.category] = 0;
      }
      categories[item.category] += price;
    });

    return { categories, total };
  };

  const { categories, total } = calculateTotals();

  // ==================== RENDER COMPONENTS ====================
  const renderInput = () => {
    if (!currentStepConfig) return null;

    switch (currentStepConfig.inputType) {
      case "choice":
        return (
          <div className="space-y-3">
            {currentStepConfig.options.map((option, index) => (
              <button
                key={index}
                onClick={() => handleSelection(option)}
                className="w-full p-4 text-left border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all duration-200 group"
              >
                <div className="flex items-center justify-between">
                  <span className="font-medium text-gray-900">{option}</span>
                  <ChevronRight className="w-5 h-5 text-gray-400 group-hover:text-blue-500" />
                </div>
              </button>
            ))}
          </div>
        );

      case "multiselect":
        return <MultiSelectInput options={currentStepConfig.options} onSubmit={handleMultiSelect} />;

      case "gallery":
        return <GalleryInput options={currentStepConfig.options} onSelect={handleSelection} />;

      default:
        return null;
    }
  };

  const getCategoryIcon = (category) => {
    switch (category) {
      case "materials": return <Package className="w-4 h-4" />;
      case "labor": return <Wrench className="w-4 h-4" />;
      case "electrical": return <Zap className="w-4 h-4" />;
      case "design": return <Palette className="w-4 h-4" />;
      default: return <DollarSign className="w-4 h-4" />;
    }
  };

  if (currentStep === "complete") {
    return <CompletePage total={total} categories={categories} lineItems={lineItems} />;
  }

  return (
    <div className="min-h-screen bg-gray-50">
      <div className="max-w-7xl mx-auto px-4 py-8">
        <div className="mb-8 text-center">
          <h1 className="text-3xl font-bold text-gray-900 mb-2">Kitchen Remodel Estimator</h1>
          <p className="text-gray-600">Get a detailed cost estimate for your kitchen renovation</p>
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
          {/* LEFT SIDE: Conversation Flow */}
          <div className="bg-white rounded-xl shadow-lg p-6">
            <div className="mb-6">
              <div className="flex items-center space-x-2 mb-4">
                <Home className="w-6 h-6 text-blue-600" />
                <h2 className="text-xl font-semibold text-gray-900">Step {Object.keys(sessionData).length + 1}</h2>
              </div>
              
              <h3 className="text-lg font-medium text-gray-800 mb-4">
                {currentStepConfig?.question}
              </h3>

              {secondaryMessage && (
                <div className={`mb-4 p-3 rounded-lg border-l-4 ${
                  secondaryMessage.emotion === 'concern' 
                    ? 'bg-amber-50 border-amber-400 text-amber-800' 
                    : 'bg-blue-50 border-blue-400 text-blue-800'
                }`}>
                  <div className="flex items-center space-x-2">
                    {secondaryMessage.emotion === 'concern' ? 
                      <AlertCircle className="w-4 h-4" /> : 
                      <CheckCircle className="w-4 h-4" />
                    }
                    <span className="text-sm">{secondaryMessage.message}</span>
                  </div>
                </div>
              )}
            </div>

            {renderInput()}

            {/* Conversation History */}
            {conversationHistory.length > 0 && (
              <div className="mt-8 pt-6 border-t border-gray-200">
                <h4 className="text-sm font-medium text-gray-500 mb-3">Previous Answers</h4>
                <div className="space-y-2 max-h-40 overflow-y-auto">
                  {conversationHistory.slice(-3).map((item, index) => (
                    <div key={index} className="text-sm">
                      <span className="text-gray-600">{item.question.substring(0, 40)}...</span>
                      <span className="ml-2 font-medium text-gray-900">{item.answer}</span>
                    </div>
                  ))}
                </div>
              </div>
            )}
          </div>

          {/* RIGHT SIDE: Line Items & Total */}
          <div className="bg-white rounded-xl shadow-lg p-6">
            <div className="flex items-center space-x-2 mb-6">
              <Calculator className="w-6 h-6 text-green-600" />
              <h2 className="text-xl font-semibold text-gray-900">Cost Breakdown</h2>
            </div>

            {/* Category Totals */}
            <div className="mb-6 space-y-3">
              {Object.entries(categories).map(([category, amount]) => (
                <div key={category} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                  <div className="flex items-center space-x-2">
                    {getCategoryIcon(category)}
                    <span className="font-medium text-gray-700 capitalize">{category}</span>
                  </div>
                  <span className="font-semibold text-gray-900">
                    ${amount.toLocaleString()}
                  </span>
                </div>
              ))}
            </div>

            {/* Total */}
            <div className="border-t border-gray-200 pt-4 mb-6">
              <div className="flex items-center justify-between text-xl font-bold">
                <span className="text-gray-900">Total Estimate</span>
                <span className="text-green-600">${total.toLocaleString()}</span>
              </div>
            </div>

            {/* Line Items Detail */}
            <div className="max-h-80 overflow-y-auto">
              <h4 className="text-sm font-medium text-gray-500 mb-3">Detailed Items</h4>
              <div className="space-y-2">
                {lineItems.map((item, index) => (
                  <div key={item.id || index} className="flex justify-between text-sm py-2 border-b border-gray-100">
                    <span className="text-gray-700">{item.name}</span>
                    <span className="font-medium text-gray-900">
                      ${(item.calculatedPrice || item.price || 0).toLocaleString()}
                    </span>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

// ==================== SUB COMPONENTS ====================
function MultiSelectInput({ options, onSubmit }) {
  const [selected, setSelected] = useState([]);

  const toggleOption = (option) => {
    setSelected(prev => 
      prev.includes(option) 
        ? prev.filter(item => item !== option)
        : [...prev, option]
    );
  };

  return (
    <div className="space-y-4">
      <div className="space-y-2">
        {options.map((option, index) => (
          <label key={index} className="flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer">